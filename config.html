<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Netsafe</title>
    <link rel="stylesheet" href="style.css">

  </head>
  <body>

    <h2 style="font-family: 'Vazir', sans-serif;">وارد کردن کانفیگ</h2>
    <textarea id="configInput" placeholder="Paste your Xray configuration here in JSON format"></textarea>
    <button id="add-textarea" type="button">افزودن داده</button>
    <button id="saveBtn" type="button">ذخیره</button>



    <button class="homeLink">برگشت</button>
    <script>
      function showMessage(msg) {
  const toast = document.createElement('div');
  toast.textContent = msg;
  toast.style.position = 'fixed';
  toast.style.bottom = '20px';
  toast.style.right = '20px';
  toast.style.background = '#333';
  toast.style.color = '#fff';
  toast.style.padding = '10px 20px';
  toast.style.borderRadius = '5px';
  toast.style.zIndex = 1000;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 2000); // بعد 2 ثانیه حذف می‌شود
}
        const { ipcRenderer,clipboard } = require('electron')
        const fs = require('fs');
        const path = require('path');
        const textarea = document.getElementById("configInput");
        
        document.querySelector("#add-textarea").addEventListener('click',()=>{
            const userConfig = document.getElementById("configInput");
            const text = clipboard.readText();
            userConfig.value = text
        })
        document.getElementById("saveBtn").addEventListener("click", () => {
            const userConfig = document.getElementById("configInput").value;
            ipcRenderer.send("save-config", userConfig);
       })
        document.querySelector('.homeLink').addEventListener('click', (e) => {
        ipcRenderer.send('navigate', 'index.html');
        });

     ipcRenderer.on("config-saved",(event,msg)=>{
        showMessage("✅ با موقعیت تغییر کرد");
     })
     ipcRenderer.send("read-file-config")
     ipcRenderer.on("data-config-send",(event,msg)=>{
      textarea.value = msg
     })

    ipcRenderer.on('custom-action', (e, text) => {
    alert('Custom action:', text);
  });
    </script>
  </body>
</html>